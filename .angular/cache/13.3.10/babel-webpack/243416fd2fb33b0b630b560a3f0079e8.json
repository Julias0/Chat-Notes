{"ast":null,"code":"var t = function (e, n) {\n  return t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n  }, t(e, n);\n};\n\nfunction e(e, n) {\n  if (\"function\" != typeof n && null !== n) throw new TypeError(\"Class extends value \" + String(n) + \" is not a constructor or null\");\n\n  function i() {\n    this.constructor = e;\n  }\n\n  t(e, n), e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype, new i());\n}\n\nvar n = function () {\n  return n = Object.assign || function (t) {\n    for (var e, n = 1, i = arguments.length; n < i; n++) for (var o in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);\n\n    return t;\n  }, n.apply(this, arguments);\n};\n\nfunction i(t, e, n, i) {\n  return new (n || (n = Promise))(function (o, r) {\n    function s(t) {\n      try {\n        u(i.next(t));\n      } catch (t) {\n        r(t);\n      }\n    }\n\n    function a(t) {\n      try {\n        u(i.throw(t));\n      } catch (t) {\n        r(t);\n      }\n    }\n\n    function u(t) {\n      var e;\n      t.done ? o(t.value) : (e = t.value, e instanceof n ? e : new n(function (t) {\n        t(e);\n      })).then(s, a);\n    }\n\n    u((i = i.apply(t, e || [])).next());\n  });\n}\n\nfunction o(t, e) {\n  var n,\n      i,\n      o,\n      r,\n      s = {\n    label: 0,\n    sent: function () {\n      if (1 & o[0]) throw o[1];\n      return o[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return r = {\n    next: a(0),\n    throw: a(1),\n    return: a(2)\n  }, \"function\" == typeof Symbol && (r[Symbol.iterator] = function () {\n    return this;\n  }), r;\n\n  function a(r) {\n    return function (a) {\n      return function (r) {\n        if (n) throw new TypeError(\"Generator is already executing.\");\n\n        for (; s;) try {\n          if (n = 1, i && (o = 2 & r[0] ? i.return : r[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, r[1])).done) return o;\n\n          switch (i = 0, o && (r = [2 & r[0], o.value]), r[0]) {\n            case 0:\n            case 1:\n              o = r;\n              break;\n\n            case 4:\n              return s.label++, {\n                value: r[1],\n                done: !1\n              };\n\n            case 5:\n              s.label++, i = r[1], r = [0];\n              continue;\n\n            case 7:\n              r = s.ops.pop(), s.trys.pop();\n              continue;\n\n            default:\n              if (!(o = s.trys, (o = o.length > 0 && o[o.length - 1]) || 6 !== r[0] && 2 !== r[0])) {\n                s = 0;\n                continue;\n              }\n\n              if (3 === r[0] && (!o || r[1] > o[0] && r[1] < o[3])) {\n                s.label = r[1];\n                break;\n              }\n\n              if (6 === r[0] && s.label < o[1]) {\n                s.label = o[1], o = r;\n                break;\n              }\n\n              if (o && s.label < o[2]) {\n                s.label = o[2], s.ops.push(r);\n                break;\n              }\n\n              o[2] && s.ops.pop(), s.trys.pop();\n              continue;\n          }\n\n          r = e.call(t, s);\n        } catch (t) {\n          r = [6, t], i = 0;\n        } finally {\n          n = o = 0;\n        }\n\n        if (5 & r[0]) throw r[1];\n        return {\n          value: r[0] ? r[1] : void 0,\n          done: !0\n        };\n      }([r, a]);\n    };\n  }\n}\n\nvar r,\n    s = function (t) {\n  function i(e) {\n    var n,\n        o = this;\n    return (o = t.call(this, \"ClientResponseError\") || this).url = \"\", o.status = 0, o.data = {}, o.isAbort = !1, o.originalError = null, Object.setPrototypeOf(o, i.prototype), e instanceof i || (o.originalError = e), null !== e && \"object\" == typeof e && (o.url = \"string\" == typeof e.url ? e.url : \"\", o.status = \"number\" == typeof e.status ? e.status : 0, o.data = null !== e.data && \"object\" == typeof e.data ? e.data : {}), \"undefined\" != typeof DOMException && e instanceof DOMException && (o.isAbort = !0), o.name = \"ClientResponseError \" + o.status, o.message = null === (n = o.data) || void 0 === n ? void 0 : n.message, o.message || (o.message = o.isAbort ? \"The request was autocancelled. More info you could find in https://github.com/pocketbase/js-sdk#auto-cancellation.\" : \"Something went wrong while processing your request.\"), o;\n  }\n\n  return e(i, t), i.prototype.toJSON = function () {\n    return n({}, this);\n  }, i;\n}(Error),\n    a = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n\nfunction u(t, e, n) {\n  var i = Object.assign({}, n || {}),\n      o = i.encode || l;\n  if (!a.test(t)) throw new TypeError(\"argument name is invalid\");\n  var r = o(e);\n  if (r && !a.test(r)) throw new TypeError(\"argument val is invalid\");\n  var s = t + \"=\" + r;\n\n  if (null != i.maxAge) {\n    var u = i.maxAge - 0;\n    if (isNaN(u) || !isFinite(u)) throw new TypeError(\"option maxAge is invalid\");\n    s += \"; Max-Age=\" + Math.floor(u);\n  }\n\n  if (i.domain) {\n    if (!a.test(i.domain)) throw new TypeError(\"option domain is invalid\");\n    s += \"; Domain=\" + i.domain;\n  }\n\n  if (i.path) {\n    if (!a.test(i.path)) throw new TypeError(\"option path is invalid\");\n    s += \"; Path=\" + i.path;\n  }\n\n  if (i.expires) {\n    if (!function (t) {\n      return \"[object Date]\" === Object.prototype.toString.call(t) || t instanceof Date;\n    }(i.expires) || isNaN(i.expires.valueOf())) throw new TypeError(\"option expires is invalid\");\n    s += \"; Expires=\" + i.expires.toUTCString();\n  }\n\n  if (i.httpOnly && (s += \"; HttpOnly\"), i.secure && (s += \"; Secure\"), i.priority) switch (\"string\" == typeof i.priority ? i.priority.toLowerCase() : i.priority) {\n    case \"low\":\n      s += \"; Priority=Low\";\n      break;\n\n    case \"medium\":\n      s += \"; Priority=Medium\";\n      break;\n\n    case \"high\":\n      s += \"; Priority=High\";\n      break;\n\n    default:\n      throw new TypeError(\"option priority is invalid\");\n  }\n  if (i.sameSite) switch (\"string\" == typeof i.sameSite ? i.sameSite.toLowerCase() : i.sameSite) {\n    case !0:\n      s += \"; SameSite=Strict\";\n      break;\n\n    case \"lax\":\n      s += \"; SameSite=Lax\";\n      break;\n\n    case \"strict\":\n      s += \"; SameSite=Strict\";\n      break;\n\n    case \"none\":\n      s += \"; SameSite=None\";\n      break;\n\n    default:\n      throw new TypeError(\"option sameSite is invalid\");\n  }\n  return s;\n}\n\nfunction c(t) {\n  return -1 !== t.indexOf(\"%\") ? decodeURIComponent(t) : t;\n}\n\nfunction l(t) {\n  return encodeURIComponent(t);\n}\n\nfunction h(t) {\n  if (t) try {\n    var e = decodeURIComponent(r(t.split(\".\")[1]).split(\"\").map(function (t) {\n      return \"%\" + (\"00\" + t.charCodeAt(0).toString(16)).slice(-2);\n    }).join(\"\"));\n    return JSON.parse(e) || {};\n  } catch (t) {}\n  return {};\n}\n\nr = \"function\" == typeof atob ? atob : function (t) {\n  var e = String(t).replace(/=+$/, \"\");\n  if (e.length % 4 == 1) throw new Error(\"'atob' failed: The string to be decoded is not correctly encoded.\");\n\n  for (var n, i, o = 0, r = 0, s = \"\"; i = e.charAt(r++); ~i && (n = o % 4 ? 64 * n + i : i, o++ % 4) ? s += String.fromCharCode(255 & n >> (-2 * o & 6)) : 0) i = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".indexOf(i);\n\n  return s;\n};\n\nvar d = function () {\n  function t(t) {\n    void 0 === t && (t = {}), this.load(t || {});\n  }\n\n  return t.prototype.load = function (t) {\n    for (var e = 0, n = Object.entries(t); e < n.length; e++) {\n      var i = n[e],\n          o = i[0],\n          r = i[1];\n      this[o] = r;\n    }\n\n    this.id = void 0 !== t.id ? t.id : \"\", this.created = void 0 !== t.created ? t.created : \"\", this.updated = void 0 !== t.updated ? t.updated : \"\";\n  }, Object.defineProperty(t.prototype, \"isNew\", {\n    get: function () {\n      return !this.id;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), t.prototype.clone = function () {\n    return new this.constructor(JSON.parse(JSON.stringify(this)));\n  }, t.prototype.export = function () {\n    return Object.assign({}, this);\n  }, t;\n}(),\n    p = function (t) {\n  function n() {\n    return null !== t && t.apply(this, arguments) || this;\n  }\n\n  return e(n, t), n.prototype.load = function (e) {\n    t.prototype.load.call(this, e), this.collectionId = \"string\" == typeof e.collectionId ? e.collectionId : \"\", this.collectionName = \"string\" == typeof e.collectionName ? e.collectionName : \"\", this.expand = \"object\" == typeof e.expand && null !== e.expand ? e.expand : {};\n  }, n;\n}(d),\n    f = function (t) {\n  function n() {\n    return null !== t && t.apply(this, arguments) || this;\n  }\n\n  return e(n, t), n.prototype.load = function (e) {\n    t.prototype.load.call(this, e), this.avatar = \"number\" == typeof e.avatar ? e.avatar : 0, this.email = \"string\" == typeof e.email ? e.email : \"\";\n  }, n;\n}(d),\n    v = function () {\n  function t() {\n    this.baseToken = \"\", this.baseModel = null, this._onChangeCallbacks = [];\n  }\n\n  return Object.defineProperty(t.prototype, \"token\", {\n    get: function () {\n      return this.baseToken;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"model\", {\n    get: function () {\n      return this.baseModel;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"isValid\", {\n    get: function () {\n      return !function (t, e) {\n        void 0 === e && (e = 0);\n        var n = h(t);\n        return !(Object.keys(n).length > 0 && (!n.exp || n.exp - e > Date.now() / 1e3));\n      }(this.token);\n    },\n    enumerable: !1,\n    configurable: !0\n  }), t.prototype.save = function (t, e) {\n    this.baseToken = t || \"\", this.baseModel = null !== e && \"object\" == typeof e ? void 0 !== e.collectionId ? new p(e) : new f(e) : null, this.triggerChange();\n  }, t.prototype.clear = function () {\n    this.baseToken = \"\", this.baseModel = null, this.triggerChange();\n  }, t.prototype.loadFromCookie = function (t, e) {\n    void 0 === e && (e = \"pb_auth\");\n\n    var n = function (t, e) {\n      var n = {};\n      if (\"string\" != typeof t) return n;\n\n      for (var i = Object.assign({}, e || {}).decode || c, o = 0; o < t.length;) {\n        var r = t.indexOf(\"=\", o);\n        if (-1 === r) break;\n        var s = t.indexOf(\";\", o);\n        if (-1 === s) s = t.length;else if (s < r) {\n          o = t.lastIndexOf(\";\", r - 1) + 1;\n          continue;\n        }\n        var a = t.slice(o, r).trim();\n\n        if (void 0 === n[a]) {\n          var u = t.slice(r + 1, s).trim();\n          34 === u.charCodeAt(0) && (u = u.slice(1, -1));\n\n          try {\n            n[a] = i(u);\n          } catch (t) {\n            n[a] = u;\n          }\n        }\n\n        o = s + 1;\n      }\n\n      return n;\n    }(t || \"\")[e] || \"\",\n        i = {};\n\n    try {\n      (null === typeof (i = JSON.parse(n)) || \"object\" != typeof i || Array.isArray(i)) && (i = {});\n    } catch (t) {}\n\n    this.save(i.token || \"\", i.model || null);\n  }, t.prototype.exportToCookie = function (t, e) {\n    var n, i, o;\n    void 0 === e && (e = \"pb_auth\");\n    var r = {\n      secure: !0,\n      sameSite: !0,\n      httpOnly: !0,\n      path: \"/\"\n    },\n        s = h(this.token);\n    (null == s ? void 0 : s.exp) ? r.expires = new Date(1e3 * s.exp) : r.expires = new Date(\"1970-01-01\"), t = Object.assign({}, r, t);\n    var a = {\n      token: this.token,\n      model: (null === (n = this.model) || void 0 === n ? void 0 : n.export()) || null\n    },\n        c = u(e, JSON.stringify(a), t),\n        l = \"undefined\" != typeof Blob ? new Blob([c]).size : c.length;\n    return a.model && l > 4096 && (a.model = {\n      id: null === (i = null == a ? void 0 : a.model) || void 0 === i ? void 0 : i.id,\n      email: null === (o = null == a ? void 0 : a.model) || void 0 === o ? void 0 : o.email\n    }, this.model instanceof p && (a.model.username = this.model.username, a.model.verified = this.model.verified, a.model.collectionId = this.model.collectionId), c = u(e, JSON.stringify(a), t)), c;\n  }, t.prototype.onChange = function (t, e) {\n    var n = this;\n    return void 0 === e && (e = !1), this._onChangeCallbacks.push(t), e && t(this.token, this.model), function () {\n      for (var e = n._onChangeCallbacks.length - 1; e >= 0; e--) if (n._onChangeCallbacks[e] == t) return delete n._onChangeCallbacks[e], void n._onChangeCallbacks.splice(e, 1);\n    };\n  }, t.prototype.triggerChange = function () {\n    for (var t = 0, e = this._onChangeCallbacks; t < e.length; t++) {\n      var n = e[t];\n      n && n(this.token, this.model);\n    }\n  }, t;\n}(),\n    m = function (t) {\n  function n(e) {\n    void 0 === e && (e = \"pocketbase_auth\");\n    var n = t.call(this) || this;\n    return n.storageFallback = {}, n.storageKey = e, n;\n  }\n\n  return e(n, t), Object.defineProperty(n.prototype, \"token\", {\n    get: function () {\n      return (this._storageGet(this.storageKey) || {}).token || \"\";\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(n.prototype, \"model\", {\n    get: function () {\n      var t,\n          e = this._storageGet(this.storageKey) || {};\n      return null === e || \"object\" != typeof e || null === e.model || \"object\" != typeof e.model ? null : void 0 === (null === (t = e.model) || void 0 === t ? void 0 : t.collectionId) ? new f(e.model) : new p(e.model);\n    },\n    enumerable: !1,\n    configurable: !0\n  }), n.prototype.save = function (e, n) {\n    this._storageSet(this.storageKey, {\n      token: e,\n      model: n\n    }), t.prototype.save.call(this, e, n);\n  }, n.prototype.clear = function () {\n    this._storageRemove(this.storageKey), t.prototype.clear.call(this);\n  }, n.prototype._storageGet = function (t) {\n    if (\"undefined\" != typeof window && (null === window || void 0 === window ? void 0 : window.localStorage)) {\n      var e = window.localStorage.getItem(t) || \"\";\n\n      try {\n        return JSON.parse(e);\n      } catch (t) {\n        return e;\n      }\n    }\n\n    return this.storageFallback[t];\n  }, n.prototype._storageSet = function (t, e) {\n    if (\"undefined\" != typeof window && (null === window || void 0 === window ? void 0 : window.localStorage)) {\n      var n = e;\n      \"string\" != typeof e && (n = JSON.stringify(e)), window.localStorage.setItem(t, n);\n    } else this.storageFallback[t] = e;\n  }, n.prototype._storageRemove = function (t) {\n    var e;\n    \"undefined\" != typeof window && (null === window || void 0 === window ? void 0 : window.localStorage) && (null === (e = window.localStorage) || void 0 === e || e.removeItem(t)), delete this.storageFallback[t];\n  }, n;\n}(v),\n    y = function (t) {\n  this.client = t;\n},\n    b = function (t) {\n  function n() {\n    return null !== t && t.apply(this, arguments) || this;\n  }\n\n  return e(n, t), n.prototype.getAll = function (t) {\n    return void 0 === t && (t = {}), this.client.send(\"/api/settings\", {\n      method: \"GET\",\n      params: t\n    }).then(function (t) {\n      return t || {};\n    });\n  }, n.prototype.update = function (t, e) {\n    return void 0 === t && (t = {}), void 0 === e && (e = {}), this.client.send(\"/api/settings\", {\n      method: \"PATCH\",\n      params: e,\n      body: t\n    }).then(function (t) {\n      return t || {};\n    });\n  }, n.prototype.testS3 = function (t) {\n    return void 0 === t && (t = {}), this.client.send(\"/api/settings/test/s3\", {\n      method: \"POST\",\n      params: t\n    }).then(function () {\n      return !0;\n    });\n  }, n.prototype.testEmail = function (t, e, n) {\n    void 0 === n && (n = {});\n    var i = {\n      email: t,\n      template: e\n    };\n    return this.client.send(\"/api/settings/test/email\", {\n      method: \"POST\",\n      params: n,\n      body: i\n    }).then(function () {\n      return !0;\n    });\n  }, n;\n}(y),\n    g = function (t, e, n, i, o) {\n  this.page = t > 0 ? t : 1, this.perPage = e >= 0 ? e : 0, this.totalItems = n >= 0 ? n : 0, this.totalPages = i >= 0 ? i : 0, this.items = o || [];\n},\n    w = function (t) {\n  function n() {\n    return null !== t && t.apply(this, arguments) || this;\n  }\n\n  return e(n, t), n.prototype.getFullList = function (t, e) {\n    return void 0 === t && (t = 200), void 0 === e && (e = {}), this._getFullList(this.baseCrudPath, t, e);\n  }, n.prototype.getList = function (t, e, n) {\n    return void 0 === t && (t = 1), void 0 === e && (e = 30), void 0 === n && (n = {}), this._getList(this.baseCrudPath, t, e, n);\n  }, n.prototype.getFirstListItem = function (t, e) {\n    return void 0 === e && (e = {}), this._getFirstListItem(this.baseCrudPath, t, e);\n  }, n.prototype.getOne = function (t, e) {\n    return void 0 === e && (e = {}), this._getOne(this.baseCrudPath, t, e);\n  }, n.prototype.create = function (t, e) {\n    return void 0 === t && (t = {}), void 0 === e && (e = {}), this._create(this.baseCrudPath, t, e);\n  }, n.prototype.update = function (t, e, n) {\n    return void 0 === e && (e = {}), void 0 === n && (n = {}), this._update(this.baseCrudPath, t, e, n);\n  }, n.prototype.delete = function (t, e) {\n    return void 0 === e && (e = {}), this._delete(this.baseCrudPath, t, e);\n  }, n;\n}(function (t) {\n  function n() {\n    return null !== t && t.apply(this, arguments) || this;\n  }\n\n  return e(n, t), n.prototype._getFullList = function (t, e, n) {\n    var r = this;\n    void 0 === e && (e = 100), void 0 === n && (n = {});\n\n    var s = [],\n        a = function (u) {\n      return i(r, void 0, void 0, function () {\n        return o(this, function (i) {\n          return [2, this._getList(t, u, e, n).then(function (t) {\n            var e = t,\n                n = e.items,\n                i = e.totalItems;\n            return s = s.concat(n), n.length && i > s.length ? a(u + 1) : s;\n          })];\n        });\n      });\n    };\n\n    return a(1);\n  }, n.prototype._getList = function (t, e, n, i) {\n    var o = this;\n    return void 0 === e && (e = 1), void 0 === n && (n = 30), void 0 === i && (i = {}), i = Object.assign({\n      page: e,\n      perPage: n\n    }, i), this.client.send(t, {\n      method: \"GET\",\n      params: i\n    }).then(function (t) {\n      var e = [];\n\n      if (null == t ? void 0 : t.items) {\n        t.items = t.items || [];\n\n        for (var n = 0, i = t.items; n < i.length; n++) {\n          var r = i[n];\n          e.push(o.decode(r));\n        }\n      }\n\n      return new g((null == t ? void 0 : t.page) || 1, (null == t ? void 0 : t.perPage) || 0, (null == t ? void 0 : t.totalItems) || 0, (null == t ? void 0 : t.totalPages) || 0, e);\n    });\n  }, n.prototype._getOne = function (t, e, n) {\n    var i = this;\n    return void 0 === n && (n = {}), this.client.send(t + \"/\" + encodeURIComponent(e), {\n      method: \"GET\",\n      params: n\n    }).then(function (t) {\n      return i.decode(t);\n    });\n  }, n.prototype._getFirstListItem = function (t, e, n) {\n    return void 0 === n && (n = {}), n = Object.assign({\n      filter: e,\n      $cancelKey: \"one_by_filter_\" + t + \"_\" + e\n    }, n), this._getList(t, 1, 1, n).then(function (t) {\n      var e;\n      if (!(null === (e = null == t ? void 0 : t.items) || void 0 === e ? void 0 : e.length)) throw new s({\n        status: 404,\n        data: {\n          code: 404,\n          message: \"The requested resource wasn't found.\",\n          data: {}\n        }\n      });\n      return t.items[0];\n    });\n  }, n.prototype._create = function (t, e, n) {\n    var i = this;\n    return void 0 === e && (e = {}), void 0 === n && (n = {}), this.client.send(t, {\n      method: \"POST\",\n      params: n,\n      body: e\n    }).then(function (t) {\n      return i.decode(t);\n    });\n  }, n.prototype._update = function (t, e, n, i) {\n    var o = this;\n    return void 0 === n && (n = {}), void 0 === i && (i = {}), this.client.send(t + \"/\" + encodeURIComponent(e), {\n      method: \"PATCH\",\n      params: i,\n      body: n\n    }).then(function (t) {\n      return o.decode(t);\n    });\n  }, n.prototype._delete = function (t, e, n) {\n    return void 0 === n && (n = {}), this.client.send(t + \"/\" + encodeURIComponent(e), {\n      method: \"DELETE\",\n      params: n\n    }).then(function () {\n      return !0;\n    });\n  }, n;\n}(y)),\n    S = function (t) {\n  function n() {\n    return null !== t && t.apply(this, arguments) || this;\n  }\n\n  return e(n, t), n.prototype.decode = function (t) {\n    return new f(t);\n  }, Object.defineProperty(n.prototype, \"baseCrudPath\", {\n    get: function () {\n      return \"/api/admins\";\n    },\n    enumerable: !1,\n    configurable: !0\n  }), n.prototype.update = function (e, n, i) {\n    var o = this;\n    return void 0 === n && (n = {}), void 0 === i && (i = {}), t.prototype.update.call(this, e, n, i).then(function (t) {\n      var e, n;\n      return o.client.authStore.model && void 0 === (null === (e = o.client.authStore.model) || void 0 === e ? void 0 : e.collectionId) && (null === (n = o.client.authStore.model) || void 0 === n ? void 0 : n.id) === (null == t ? void 0 : t.id) && o.client.authStore.save(o.client.authStore.token, t), t;\n    });\n  }, n.prototype.delete = function (e, n) {\n    var i = this;\n    return void 0 === n && (n = {}), t.prototype.delete.call(this, e, n).then(function (t) {\n      var n, o;\n      return t && i.client.authStore.model && void 0 === (null === (n = i.client.authStore.model) || void 0 === n ? void 0 : n.collectionId) && (null === (o = i.client.authStore.model) || void 0 === o ? void 0 : o.id) === e && i.client.authStore.clear(), t;\n    });\n  }, n.prototype.authResponse = function (t) {\n    var e = this.decode((null == t ? void 0 : t.admin) || {});\n    return (null == t ? void 0 : t.token) && (null == t ? void 0 : t.admin) && this.client.authStore.save(t.token, e), Object.assign({}, t, {\n      token: (null == t ? void 0 : t.token) || \"\",\n      admin: e\n    });\n  }, n.prototype.authWithPassword = function (t, e, n, i) {\n    return void 0 === n && (n = {}), void 0 === i && (i = {}), n = Object.assign({\n      identity: t,\n      password: e\n    }, n), this.client.send(this.baseCrudPath + \"/auth-with-password\", {\n      method: \"POST\",\n      params: i,\n      body: n,\n      headers: {\n        Authorization: \"\"\n      }\n    }).then(this.authResponse.bind(this));\n  }, n.prototype.authRefresh = function (t, e) {\n    return void 0 === t && (t = {}), void 0 === e && (e = {}), this.client.send(this.baseCrudPath + \"/auth-refresh\", {\n      method: \"POST\",\n      params: e,\n      body: t\n    }).then(this.authResponse.bind(this));\n  }, n.prototype.requestPasswordReset = function (t, e, n) {\n    return void 0 === e && (e = {}), void 0 === n && (n = {}), e = Object.assign({\n      email: t\n    }, e), this.client.send(this.baseCrudPath + \"/request-password-reset\", {\n      method: \"POST\",\n      params: n,\n      body: e\n    }).then(function () {\n      return !0;\n    });\n  }, n.prototype.confirmPasswordReset = function (t, e, n, i, o) {\n    return void 0 === i && (i = {}), void 0 === o && (o = {}), i = Object.assign({\n      token: t,\n      password: e,\n      passwordConfirm: n\n    }, i), this.client.send(this.baseCrudPath + \"/confirm-password-reset\", {\n      method: \"POST\",\n      params: o,\n      body: i\n    }).then(function () {\n      return !0;\n    });\n  }, n;\n}(w),\n    C = function (t) {\n  function n() {\n    return null !== t && t.apply(this, arguments) || this;\n  }\n\n  return e(n, t), n.prototype.load = function (e) {\n    t.prototype.load.call(this, e), this.recordId = \"string\" == typeof e.recordId ? e.recordId : \"\", this.collectionId = \"string\" == typeof e.collectionId ? e.collectionId : \"\", this.provider = \"string\" == typeof e.provider ? e.provider : \"\", this.providerId = \"string\" == typeof e.providerId ? e.providerId : \"\";\n  }, n;\n}(d),\n    O = function (t) {\n  function n(e, n) {\n    var i = t.call(this, e) || this;\n    return i.collectionIdOrName = n, i;\n  }\n\n  return e(n, t), n.prototype.decode = function (t) {\n    return new p(t);\n  }, Object.defineProperty(n.prototype, \"baseCrudPath\", {\n    get: function () {\n      return this.baseCollectionPath + \"/records\";\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(n.prototype, \"baseCollectionPath\", {\n    get: function () {\n      return \"/api/collections/\" + encodeURIComponent(this.collectionIdOrName);\n    },\n    enumerable: !1,\n    configurable: !0\n  }), n.prototype.subscribeOne = function (t, e) {\n    return i(this, void 0, void 0, function () {\n      return o(this, function (n) {\n        return console.warn(\"PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback).\"), [2, this.client.realtime.subscribe(this.collectionIdOrName + \"/\" + t, e)];\n      });\n    });\n  }, n.prototype.subscribe = function (t, e) {\n    return i(this, void 0, void 0, function () {\n      var n;\n      return o(this, function (i) {\n        if (\"function\" == typeof t) return console.warn(\"PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback).\"), [2, this.client.realtime.subscribe(this.collectionIdOrName, t)];\n        if (!e) throw new Error(\"Missing subscription callback.\");\n        if (\"\" === t) throw new Error(\"Missing topic.\");\n        return n = this.collectionIdOrName, \"*\" !== t && (n += \"/\" + t), [2, this.client.realtime.subscribe(n, e)];\n      });\n    });\n  }, n.prototype.unsubscribe = function (t) {\n    return i(this, void 0, void 0, function () {\n      return o(this, function (e) {\n        return \"*\" === t ? [2, this.client.realtime.unsubscribe(this.collectionIdOrName)] : t ? [2, this.client.realtime.unsubscribe(this.collectionIdOrName + \"/\" + t)] : [2, this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)];\n      });\n    });\n  }, n.prototype.getFullList = function (e, n) {\n    return void 0 === e && (e = 200), void 0 === n && (n = {}), t.prototype.getFullList.call(this, e, n);\n  }, n.prototype.getList = function (e, n, i) {\n    return void 0 === e && (e = 1), void 0 === n && (n = 30), void 0 === i && (i = {}), t.prototype.getList.call(this, e, n, i);\n  }, n.prototype.getFirstListItem = function (e, n) {\n    return void 0 === n && (n = {}), t.prototype.getFirstListItem.call(this, e, n);\n  }, n.prototype.getOne = function (e, n) {\n    return void 0 === n && (n = {}), t.prototype.getOne.call(this, e, n);\n  }, n.prototype.create = function (e, n) {\n    return void 0 === e && (e = {}), void 0 === n && (n = {}), t.prototype.create.call(this, e, n);\n  }, n.prototype.update = function (e, n, i) {\n    var o = this;\n    return void 0 === n && (n = {}), void 0 === i && (i = {}), t.prototype.update.call(this, e, n, i).then(function (t) {\n      var e, n;\n      return void 0 !== (null === (e = o.client.authStore.model) || void 0 === e ? void 0 : e.collectionId) && (null === (n = o.client.authStore.model) || void 0 === n ? void 0 : n.id) === (null == t ? void 0 : t.id) && o.client.authStore.save(o.client.authStore.token, t), t;\n    });\n  }, n.prototype.delete = function (e, n) {\n    var i = this;\n    return void 0 === n && (n = {}), t.prototype.delete.call(this, e, n).then(function (t) {\n      var n, o;\n      return t && void 0 !== (null === (n = i.client.authStore.model) || void 0 === n ? void 0 : n.collectionId) && (null === (o = i.client.authStore.model) || void 0 === o ? void 0 : o.id) === e && i.client.authStore.clear(), t;\n    });\n  }, n.prototype.authResponse = function (t) {\n    var e = this.decode((null == t ? void 0 : t.record) || {});\n    return this.client.authStore.save(null == t ? void 0 : t.token, e), Object.assign({}, t, {\n      token: (null == t ? void 0 : t.token) || \"\",\n      record: e\n    });\n  }, n.prototype.listAuthMethods = function (t) {\n    return void 0 === t && (t = {}), this.client.send(this.baseCollectionPath + \"/auth-methods\", {\n      method: \"GET\",\n      params: t\n    }).then(function (t) {\n      return Object.assign({}, t, {\n        usernamePassword: !!(null == t ? void 0 : t.usernamePassword),\n        emailPassword: !!(null == t ? void 0 : t.emailPassword),\n        authProviders: Array.isArray(null == t ? void 0 : t.authProviders) ? null == t ? void 0 : t.authProviders : []\n      });\n    });\n  }, n.prototype.authWithPassword = function (t, e, n, i) {\n    var o = this;\n    return void 0 === n && (n = {}), void 0 === i && (i = {}), n = Object.assign({\n      identity: t,\n      password: e\n    }, n), this.client.send(this.baseCollectionPath + \"/auth-with-password\", {\n      method: \"POST\",\n      params: i,\n      body: n,\n      headers: {\n        Authorization: \"\"\n      }\n    }).then(function (t) {\n      return o.authResponse(t);\n    });\n  }, n.prototype.authWithOAuth2 = function (t, e, n, i, o, r, s) {\n    var a = this;\n    return void 0 === o && (o = {}), void 0 === r && (r = {}), void 0 === s && (s = {}), r = Object.assign({\n      provider: t,\n      code: e,\n      codeVerifier: n,\n      redirectUrl: i,\n      createData: o\n    }, r), this.client.send(this.baseCollectionPath + \"/auth-with-oauth2\", {\n      method: \"POST\",\n      params: s,\n      body: r\n    }).then(function (t) {\n      return a.authResponse(t);\n    });\n  }, n.prototype.authRefresh = function (t, e) {\n    var n = this;\n    return void 0 === t && (t = {}), void 0 === e && (e = {}), this.client.send(this.baseCollectionPath + \"/auth-refresh\", {\n      method: \"POST\",\n      params: e,\n      body: t\n    }).then(function (t) {\n      return n.authResponse(t);\n    });\n  }, n.prototype.requestPasswordReset = function (t, e, n) {\n    return void 0 === e && (e = {}), void 0 === n && (n = {}), e = Object.assign({\n      email: t\n    }, e), this.client.send(this.baseCollectionPath + \"/request-password-reset\", {\n      method: \"POST\",\n      params: n,\n      body: e\n    }).then(function () {\n      return !0;\n    });\n  }, n.prototype.confirmPasswordReset = function (t, e, n, i, o) {\n    return void 0 === i && (i = {}), void 0 === o && (o = {}), i = Object.assign({\n      token: t,\n      password: e,\n      passwordConfirm: n\n    }, i), this.client.send(this.baseCollectionPath + \"/confirm-password-reset\", {\n      method: \"POST\",\n      params: o,\n      body: i\n    }).then(function () {\n      return !0;\n    });\n  }, n.prototype.requestVerification = function (t, e, n) {\n    return void 0 === e && (e = {}), void 0 === n && (n = {}), e = Object.assign({\n      email: t\n    }, e), this.client.send(this.baseCollectionPath + \"/request-verification\", {\n      method: \"POST\",\n      params: n,\n      body: e\n    }).then(function () {\n      return !0;\n    });\n  }, n.prototype.confirmVerification = function (t, e, n) {\n    return void 0 === e && (e = {}), void 0 === n && (n = {}), e = Object.assign({\n      token: t\n    }, e), this.client.send(this.baseCollectionPath + \"/confirm-verification\", {\n      method: \"POST\",\n      params: n,\n      body: e\n    }).then(function () {\n      return !0;\n    });\n  }, n.prototype.requestEmailChange = function (t, e, n) {\n    return void 0 === e && (e = {}), void 0 === n && (n = {}), e = Object.assign({\n      newEmail: t\n    }, e), this.client.send(this.baseCollectionPath + \"/request-email-change\", {\n      method: \"POST\",\n      params: n,\n      body: e\n    }).then(function () {\n      return !0;\n    });\n  }, n.prototype.confirmEmailChange = function (t, e, n, i) {\n    return void 0 === n && (n = {}), void 0 === i && (i = {}), n = Object.assign({\n      token: t,\n      password: e\n    }, n), this.client.send(this.baseCollectionPath + \"/confirm-email-change\", {\n      method: \"POST\",\n      params: i,\n      body: n\n    }).then(function () {\n      return !0;\n    });\n  }, n.prototype.listExternalAuths = function (t, e) {\n    return void 0 === e && (e = {}), this.client.send(this.baseCrudPath + \"/\" + encodeURIComponent(t) + \"/external-auths\", {\n      method: \"GET\",\n      params: e\n    }).then(function (t) {\n      var e = [];\n      if (Array.isArray(t)) for (var n = 0, i = t; n < i.length; n++) {\n        var o = i[n];\n        e.push(new C(o));\n      }\n      return e;\n    });\n  }, n.prototype.unlinkExternalAuth = function (t, e, n) {\n    return void 0 === n && (n = {}), this.client.send(this.baseCrudPath + \"/\" + encodeURIComponent(t) + \"/external-auths/\" + encodeURIComponent(e), {\n      method: \"DELETE\",\n      params: n\n    }).then(function () {\n      return !0;\n    });\n  }, n;\n}(w),\n    P = function () {\n  function t(t) {\n    void 0 === t && (t = {}), this.load(t || {});\n  }\n\n  return t.prototype.load = function (t) {\n    this.id = void 0 !== t.id ? t.id : \"\", this.name = void 0 !== t.name ? t.name : \"\", this.type = void 0 !== t.type ? t.type : \"text\", this.system = !!t.system, this.required = !!t.required, this.unique = !!t.unique, this.options = \"object\" == typeof t.options && null !== t.options ? t.options : {};\n  }, t;\n}(),\n    I = function (t) {\n  function n() {\n    return null !== t && t.apply(this, arguments) || this;\n  }\n\n  return e(n, t), n.prototype.load = function (e) {\n    t.prototype.load.call(this, e), this.system = !!e.system, this.name = \"string\" == typeof e.name ? e.name : \"\", this.type = \"string\" == typeof e.type ? e.type : \"base\", this.options = void 0 !== e.options ? e.options : {}, this.listRule = \"string\" == typeof e.listRule ? e.listRule : null, this.viewRule = \"string\" == typeof e.viewRule ? e.viewRule : null, this.createRule = \"string\" == typeof e.createRule ? e.createRule : null, this.updateRule = \"string\" == typeof e.updateRule ? e.updateRule : null, this.deleteRule = \"string\" == typeof e.deleteRule ? e.deleteRule : null, e.schema = Array.isArray(e.schema) ? e.schema : [], this.schema = [];\n\n    for (var n = 0, i = e.schema; n < i.length; n++) {\n      var o = i[n];\n      this.schema.push(new P(o));\n    }\n  }, Object.defineProperty(n.prototype, \"isBase\", {\n    get: function () {\n      return \"base\" === this.type;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(n.prototype, \"isAuth\", {\n    get: function () {\n      return \"auth\" === this.type;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), Object.defineProperty(n.prototype, \"isSingle\", {\n    get: function () {\n      return \"single\" === this.type;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), n;\n}(d),\n    T = function (t) {\n  function n() {\n    return null !== t && t.apply(this, arguments) || this;\n  }\n\n  return e(n, t), n.prototype.decode = function (t) {\n    return new I(t);\n  }, Object.defineProperty(n.prototype, \"baseCrudPath\", {\n    get: function () {\n      return \"/api/collections\";\n    },\n    enumerable: !1,\n    configurable: !0\n  }), n.prototype.import = function (t, e, n) {\n    return void 0 === e && (e = !1), void 0 === n && (n = {}), i(this, void 0, void 0, function () {\n      return o(this, function (i) {\n        return [2, this.client.send(this.baseCrudPath + \"/import\", {\n          method: \"PUT\",\n          params: n,\n          body: {\n            collections: t,\n            deleteMissing: e\n          }\n        }).then(function () {\n          return !0;\n        })];\n      });\n    });\n  }, n;\n}(w),\n    j = function (t) {\n  function n() {\n    return null !== t && t.apply(this, arguments) || this;\n  }\n\n  return e(n, t), n.prototype.load = function (e) {\n    t.prototype.load.call(this, e), e.remoteIp = e.remoteIp || e.ip, this.url = \"string\" == typeof e.url ? e.url : \"\", this.method = \"string\" == typeof e.method ? e.method : \"GET\", this.status = \"number\" == typeof e.status ? e.status : 200, this.auth = \"string\" == typeof e.auth ? e.auth : \"guest\", this.remoteIp = \"string\" == typeof e.remoteIp ? e.remoteIp : \"\", this.userIp = \"string\" == typeof e.userIp ? e.userIp : \"\", this.referer = \"string\" == typeof e.referer ? e.referer : \"\", this.userAgent = \"string\" == typeof e.userAgent ? e.userAgent : \"\", this.meta = \"object\" == typeof e.meta && null !== e.meta ? e.meta : {};\n  }, n;\n}(d),\n    k = function (t) {\n  function n() {\n    return null !== t && t.apply(this, arguments) || this;\n  }\n\n  return e(n, t), n.prototype.getRequestsList = function (t, e, n) {\n    return void 0 === t && (t = 1), void 0 === e && (e = 30), void 0 === n && (n = {}), n = Object.assign({\n      page: t,\n      perPage: e\n    }, n), this.client.send(\"/api/logs/requests\", {\n      method: \"GET\",\n      params: n\n    }).then(function (t) {\n      var e = [];\n\n      if (null == t ? void 0 : t.items) {\n        t.items = (null == t ? void 0 : t.items) || [];\n\n        for (var n = 0, i = t.items; n < i.length; n++) {\n          var o = i[n];\n          e.push(new j(o));\n        }\n      }\n\n      return new g((null == t ? void 0 : t.page) || 1, (null == t ? void 0 : t.perPage) || 0, (null == t ? void 0 : t.totalItems) || 0, (null == t ? void 0 : t.totalPages) || 0, e);\n    });\n  }, n.prototype.getRequest = function (t, e) {\n    return void 0 === e && (e = {}), this.client.send(\"/api/logs/requests/\" + encodeURIComponent(t), {\n      method: \"GET\",\n      params: e\n    }).then(function (t) {\n      return new j(t);\n    });\n  }, n.prototype.getRequestsStats = function (t) {\n    return void 0 === t && (t = {}), this.client.send(\"/api/logs/requests/stats\", {\n      method: \"GET\",\n      params: t\n    }).then(function (t) {\n      return t;\n    });\n  }, n;\n}(y),\n    E = function (t) {\n  function n() {\n    var e = null !== t && t.apply(this, arguments) || this;\n    return e.clientId = \"\", e.eventSource = null, e.subscriptions = {}, e.lastSentTopics = [], e.maxConnectTimeout = 1e4, e.reconnectAttempts = 0, e.maxReconnectAttempts = 1 / 0, e.predefinedReconnectIntervals = [200, 300, 500, 1e3, 1200, 1500, 2e3], e.pendingConnects = [], e;\n  }\n\n  return e(n, t), Object.defineProperty(n.prototype, \"isConnected\", {\n    get: function () {\n      return !!this.eventSource && !!this.clientId && !this.pendingConnects.length;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), n.prototype.subscribe = function (t, e) {\n    var n;\n    return i(this, void 0, void 0, function () {\n      var r,\n          s = this;\n      return o(this, function (a) {\n        switch (a.label) {\n          case 0:\n            if (!t) throw new Error(\"topic must be set.\");\n            return r = function (t) {\n              var n,\n                  i = t;\n\n              try {\n                n = JSON.parse(null == i ? void 0 : i.data);\n              } catch (t) {}\n\n              e(n || {});\n            }, this.subscriptions[t] || (this.subscriptions[t] = []), this.subscriptions[t].push(r), this.isConnected ? [3, 2] : [4, this.connect()];\n\n          case 1:\n            return a.sent(), [3, 5];\n\n          case 2:\n            return 1 !== this.subscriptions[t].length ? [3, 4] : [4, this.submitSubscriptions()];\n\n          case 3:\n            return a.sent(), [3, 5];\n\n          case 4:\n            null === (n = this.eventSource) || void 0 === n || n.addEventListener(t, r), a.label = 5;\n\n          case 5:\n            return [2, function () {\n              return i(s, void 0, void 0, function () {\n                return o(this, function (e) {\n                  return [2, this.unsubscribeByTopicAndListener(t, r)];\n                });\n              });\n            }];\n        }\n      });\n    });\n  }, n.prototype.unsubscribe = function (t) {\n    var e;\n    return i(this, void 0, void 0, function () {\n      var n, i, r;\n      return o(this, function (o) {\n        switch (o.label) {\n          case 0:\n            if (!this.hasSubscriptionListeners(t)) return [2];\n\n            if (t) {\n              for (n = 0, i = this.subscriptions[t]; n < i.length; n++) r = i[n], null === (e = this.eventSource) || void 0 === e || e.removeEventListener(t, r);\n\n              delete this.subscriptions[t];\n            } else this.subscriptions = {};\n\n            return this.hasSubscriptionListeners() ? [3, 1] : (this.disconnect(), [3, 3]);\n\n          case 1:\n            return this.hasSubscriptionListeners(t) ? [3, 3] : [4, this.submitSubscriptions()];\n\n          case 2:\n            o.sent(), o.label = 3;\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, n.prototype.unsubscribeByPrefix = function (t) {\n    var e;\n    return i(this, void 0, void 0, function () {\n      var n, i, r, s, a;\n      return o(this, function (o) {\n        switch (o.label) {\n          case 0:\n            for (i in n = !1, this.subscriptions) if (i.startsWith(t)) {\n              for (n = !0, r = 0, s = this.subscriptions[i]; r < s.length; r++) a = s[r], null === (e = this.eventSource) || void 0 === e || e.removeEventListener(i, a);\n\n              delete this.subscriptions[i];\n            }\n\n            return n ? this.hasSubscriptionListeners() ? [4, this.submitSubscriptions()] : [3, 2] : [2];\n\n          case 1:\n            return o.sent(), [3, 3];\n\n          case 2:\n            this.disconnect(), o.label = 3;\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, n.prototype.unsubscribeByTopicAndListener = function (t, e) {\n    var n;\n    return i(this, void 0, void 0, function () {\n      var i, r;\n      return o(this, function (o) {\n        switch (o.label) {\n          case 0:\n            if (!Array.isArray(this.subscriptions[t]) || !this.subscriptions[t].length) return [2];\n\n            for (i = !1, r = this.subscriptions[t].length - 1; r >= 0; r--) this.subscriptions[t][r] === e && (i = !0, delete this.subscriptions[t][r], this.subscriptions[t].splice(r, 1), null === (n = this.eventSource) || void 0 === n || n.removeEventListener(t, e));\n\n            return i ? (this.subscriptions[t].length || delete this.subscriptions[t], this.hasSubscriptionListeners() ? [3, 1] : (this.disconnect(), [3, 3])) : [2];\n\n          case 1:\n            return this.hasSubscriptionListeners(t) ? [3, 3] : [4, this.submitSubscriptions()];\n\n          case 2:\n            o.sent(), o.label = 3;\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, n.prototype.hasSubscriptionListeners = function (t) {\n    var e, n;\n    if (this.subscriptions = this.subscriptions || {}, t) return !!(null === (e = this.subscriptions[t]) || void 0 === e ? void 0 : e.length);\n\n    for (var i in this.subscriptions) if (null === (n = this.subscriptions[i]) || void 0 === n ? void 0 : n.length) return !0;\n\n    return !1;\n  }, n.prototype.submitSubscriptions = function () {\n    return i(this, void 0, void 0, function () {\n      return o(this, function (t) {\n        return this.clientId ? (this.addAllSubscriptionListeners(), this.lastSentTopics = this.getNonEmptySubscriptionTopics(), [2, this.client.send(\"/api/realtime\", {\n          method: \"POST\",\n          body: {\n            clientId: this.clientId,\n            subscriptions: this.lastSentTopics\n          },\n          params: {\n            $cancelKey: \"realtime_\" + this.clientId\n          }\n        }).catch(function (t) {\n          if (!(null == t ? void 0 : t.isAbort)) throw t;\n        })]) : [2];\n      });\n    });\n  }, n.prototype.getNonEmptySubscriptionTopics = function () {\n    var t = [];\n\n    for (var e in this.subscriptions) this.subscriptions[e].length && t.push(e);\n\n    return t;\n  }, n.prototype.addAllSubscriptionListeners = function () {\n    if (this.eventSource) for (var t in this.removeAllSubscriptionListeners(), this.subscriptions) for (var e = 0, n = this.subscriptions[t]; e < n.length; e++) {\n      var i = n[e];\n      this.eventSource.addEventListener(t, i);\n    }\n  }, n.prototype.removeAllSubscriptionListeners = function () {\n    if (this.eventSource) for (var t in this.subscriptions) for (var e = 0, n = this.subscriptions[t]; e < n.length; e++) {\n      var i = n[e];\n      this.eventSource.removeEventListener(t, i);\n    }\n  }, n.prototype.connect = function () {\n    return i(this, void 0, void 0, function () {\n      var t = this;\n      return o(this, function (e) {\n        return this.reconnectAttempts > 0 ? [2] : [2, new Promise(function (e, n) {\n          t.pendingConnects.push({\n            resolve: e,\n            reject: n\n          }), t.pendingConnects.length > 1 || t.initConnect();\n        })];\n      });\n    });\n  }, n.prototype.initConnect = function () {\n    var t = this;\n    this.disconnect(!0), clearTimeout(this.connectTimeoutId), this.connectTimeoutId = setTimeout(function () {\n      t.connectErrorHandler(new Error(\"EventSource connect took too long.\"));\n    }, this.maxConnectTimeout), this.eventSource = new EventSource(this.client.buildUrl(\"/api/realtime\")), this.eventSource.onerror = function (e) {\n      t.connectErrorHandler(new Error(\"Failed to establish realtime connection.\"));\n    }, this.eventSource.addEventListener(\"PB_CONNECT\", function (e) {\n      var n = e;\n      t.clientId = null == n ? void 0 : n.lastEventId, t.submitSubscriptions().then(function () {\n        return i(t, void 0, void 0, function () {\n          var t;\n          return o(this, function (e) {\n            switch (e.label) {\n              case 0:\n                t = 3, e.label = 1;\n\n              case 1:\n                return this.hasUnsentSubscriptions() && t > 0 ? (t--, [4, this.submitSubscriptions()]) : [3, 3];\n\n              case 2:\n                return e.sent(), [3, 1];\n\n              case 3:\n                return [2];\n            }\n          });\n        });\n      }).then(function () {\n        for (var e = 0, n = t.pendingConnects; e < n.length; e++) {\n          n[e].resolve();\n        }\n\n        t.pendingConnects = [], t.reconnectAttempts = 0, clearTimeout(t.reconnectTimeoutId), clearTimeout(t.connectTimeoutId);\n      }).catch(function (e) {\n        t.clientId = \"\", t.connectErrorHandler(e);\n      });\n    });\n  }, n.prototype.hasUnsentSubscriptions = function () {\n    var t = this.getNonEmptySubscriptionTopics();\n    if (t.length != this.lastSentTopics.length) return !0;\n\n    for (var e = 0, n = t; e < n.length; e++) {\n      var i = n[e];\n      if (!this.lastSentTopics.includes(i)) return !0;\n    }\n\n    return !1;\n  }, n.prototype.connectErrorHandler = function (t) {\n    var e = this;\n\n    if (clearTimeout(this.connectTimeoutId), clearTimeout(this.reconnectTimeoutId), !this.clientId && !this.reconnectAttempts || this.reconnectAttempts > this.maxReconnectAttempts) {\n      for (var n = 0, i = this.pendingConnects; n < i.length; n++) {\n        i[n].reject(new s(t));\n      }\n\n      this.disconnect();\n    } else {\n      this.disconnect(!0);\n      var o = this.predefinedReconnectIntervals[this.reconnectAttempts] || this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length - 1];\n      this.reconnectAttempts++, this.reconnectTimeoutId = setTimeout(function () {\n        e.initConnect();\n      }, o);\n    }\n  }, n.prototype.disconnect = function (t) {\n    var e;\n\n    if (void 0 === t && (t = !1), clearTimeout(this.connectTimeoutId), clearTimeout(this.reconnectTimeoutId), this.removeAllSubscriptionListeners(), null === (e = this.eventSource) || void 0 === e || e.close(), this.eventSource = null, this.clientId = \"\", !t) {\n      this.reconnectAttempts = 0;\n\n      for (var n = new s(new Error(\"Realtime disconnected.\")), i = 0, o = this.pendingConnects; i < o.length; i++) {\n        o[i].reject(n);\n      }\n\n      this.pendingConnects = [];\n    }\n  }, n;\n}(y),\n    R = function (t) {\n  function n() {\n    return null !== t && t.apply(this, arguments) || this;\n  }\n\n  return e(n, t), n.prototype.check = function (t) {\n    return void 0 === t && (t = {}), this.client.send(\"/api/health\", {\n      method: \"GET\",\n      params: t\n    });\n  }, n;\n}(y),\n    A = function () {\n  function t(t, e, n) {\n    void 0 === t && (t = \"/\"), void 0 === n && (n = \"en-US\"), this.cancelControllers = {}, this.recordServices = {}, this.enableAutoCancellation = !0, this.baseUrl = t, this.lang = n, this.authStore = e || new m(), this.admins = new S(this), this.collections = new T(this), this.logs = new k(this), this.settings = new b(this), this.realtime = new E(this), this.health = new R(this);\n  }\n\n  return t.prototype.collection = function (t) {\n    return this.recordServices[t] || (this.recordServices[t] = new O(this, t)), this.recordServices[t];\n  }, t.prototype.autoCancellation = function (t) {\n    return this.enableAutoCancellation = !!t, this;\n  }, t.prototype.cancelRequest = function (t) {\n    return this.cancelControllers[t] && (this.cancelControllers[t].abort(), delete this.cancelControllers[t]), this;\n  }, t.prototype.cancelAllRequests = function () {\n    for (var t in this.cancelControllers) this.cancelControllers[t].abort();\n\n    return this.cancelControllers = {}, this;\n  }, t.prototype.send = function (t, e) {\n    var n, r, a, u, c, l, h, d;\n    return i(this, void 0, void 0, function () {\n      var p,\n          f,\n          v,\n          m,\n          y,\n          b = this;\n      return o(this, function (g) {\n        return (p = Object.assign({\n          method: \"GET\"\n        }, e)).body && \"FormData\" !== p.body.constructor.name && (\"string\" != typeof p.body && (p.body = JSON.stringify(p.body)), void 0 === (null === (n = null == p ? void 0 : p.headers) || void 0 === n ? void 0 : n[\"Content-Type\"]) && (p.headers = Object.assign({}, p.headers, {\n          \"Content-Type\": \"application/json\"\n        }))), void 0 === (null === (r = null == p ? void 0 : p.headers) || void 0 === r ? void 0 : r[\"Accept-Language\"]) && (p.headers = Object.assign({}, p.headers, {\n          \"Accept-Language\": this.lang\n        })), (null === (a = this.authStore) || void 0 === a ? void 0 : a.token) && void 0 === (null === (u = null == p ? void 0 : p.headers) || void 0 === u ? void 0 : u.Authorization) && (p.headers = Object.assign({}, p.headers, {\n          Authorization: this.authStore.token\n        })), this.enableAutoCancellation && !1 !== (null === (c = p.params) || void 0 === c ? void 0 : c.$autoCancel) && (f = (null === (l = p.params) || void 0 === l ? void 0 : l.$cancelKey) || (p.method || \"GET\") + t, this.cancelRequest(f), v = new AbortController(), this.cancelControllers[f] = v, p.signal = v.signal), null === (h = p.params) || void 0 === h || delete h.$autoCancel, null === (d = p.params) || void 0 === d || delete d.$cancelKey, m = this.buildUrl(t), void 0 !== p.params && ((y = this.serializeQueryParams(p.params)) && (m += (m.includes(\"?\") ? \"&\" : \"?\") + y), delete p.params), this.beforeSend && (p = Object.assign({}, this.beforeSend(m, p))), [2, fetch(m, p).then(function (t) {\n          return i(b, void 0, void 0, function () {\n            var e;\n            return o(this, function (n) {\n              switch (n.label) {\n                case 0:\n                  e = {}, n.label = 1;\n\n                case 1:\n                  return n.trys.push([1, 3,, 4]), [4, t.json()];\n\n                case 2:\n                  return e = n.sent(), [3, 4];\n\n                case 3:\n                  return n.sent(), [3, 4];\n\n                case 4:\n                  if (this.afterSend && (e = this.afterSend(t, e)), t.status >= 400) throw new s({\n                    url: t.url,\n                    status: t.status,\n                    data: e\n                  });\n                  return [2, e];\n              }\n            });\n          });\n        }).catch(function (t) {\n          throw new s(t);\n        })];\n      });\n    });\n  }, t.prototype.getFileUrl = function (t, e, n) {\n    void 0 === n && (n = {});\n    var i = [];\n    i.push(\"api\"), i.push(\"files\"), i.push(encodeURIComponent(t.collectionId || t.collectionName)), i.push(encodeURIComponent(t.id)), i.push(encodeURIComponent(e));\n    var o = this.buildUrl(i.join(\"/\"));\n\n    if (Object.keys(n).length) {\n      var r = new URLSearchParams(n);\n      o += (o.includes(\"?\") ? \"&\" : \"?\") + r;\n    }\n\n    return o;\n  }, t.prototype.buildUrl = function (t) {\n    var e = this.baseUrl + (this.baseUrl.endsWith(\"/\") ? \"\" : \"/\");\n    return t && (e += t.startsWith(\"/\") ? t.substring(1) : t), e;\n  }, t.prototype.serializeQueryParams = function (t) {\n    var e = [];\n\n    for (var n in t) if (null !== t[n]) {\n      var i = t[n],\n          o = encodeURIComponent(n);\n      if (Array.isArray(i)) for (var r = 0, s = i; r < s.length; r++) {\n        var a = s[r];\n        e.push(o + \"=\" + encodeURIComponent(a));\n      } else i instanceof Date ? e.push(o + \"=\" + encodeURIComponent(i.toISOString())) : null !== typeof i && \"object\" == typeof i ? e.push(o + \"=\" + encodeURIComponent(JSON.stringify(i))) : e.push(o + \"=\" + encodeURIComponent(i));\n    }\n\n    return e.join(\"&\");\n  }, t;\n}();\n\nexport { f as Admin, v as BaseAuthStore, d as BaseModel, s as ClientResponseError, I as Collection, C as ExternalAuth, g as ListResult, m as LocalAuthStore, j as LogRequest, p as Record, P as SchemaField, A as default, h as getTokenPayload }; //# sourceMappingURL=pocketbase.es.mjs.map","map":null,"metadata":{},"sourceType":"module"}